(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=i.a.createContext({}),b=function(e){var t=i.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=b(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(a),u=n,m=p["".concat(l,".").concat(u)]||p[u]||d[u]||r;return a?i.a.createElement(m,o(o({ref:t},s),{},{components:a})):i.a.createElement(m,o({ref:t},s))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,l=new Array(r);l[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var s=2;s<r;s++)l[s]=a[s];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},74:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return o})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return b}));var n=a(3),i=a(7),r=(a(0),a(103)),l={id:"b3",title:"\ud83d\udc68\u200d\ud83d\udcbcCreating Profile Settings",slug:"/profile-setting"},o={unversionedId:"b3",id:"b3",isDocsHomePage:!1,title:"\ud83d\udc68\u200d\ud83d\udcbcCreating Profile Settings",description:"profile setting",source:"@site/docs\\b3.md",slug:"/profile-setting",permalink:"/Tutorial-HayWord-Messenger-Wit.ai-ReactJS/docs/profile-setting",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/b3.md",version:"current",sidebar:"someSidebar",previous:{title:"\ud83c\udf89Welcome Screen",permalink:"/Tutorial-HayWord-Messenger-Wit.ai-ReactJS/docs/welcome-screen"},next:{title:"\ud83c\ude38Creating Translate Feature",permalink:"/Tutorial-HayWord-Messenger-Wit.ai-ReactJS/docs/translate-feature"}},c=[{value:"Connecting Firebase with Applications",id:"connecting-firebase-with-applications",children:[]},{value:"Creating a User Table in Firebase",id:"creating-a-user-table-in-firebase",children:[]},{value:"Creating a Webview to Get User Data with ReactJS",id:"creating-a-webview-to-get-user-data-with-reactjs",children:[]},{value:"Saving Data to Firebase",id:"saving-data-to-firebase",children:[]},{value:"Creating a Webview Url Button",id:"creating-a-webview-url-button",children:[]}],s={rightToc:c};function b(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/w_0.3,c_scale,bo_4px_solid_grey/v1603575202/IMG_4373_ft5fkx.jpg",alt:"profile setting",title:"profile setting"}))),Object(r.b)("p",null," In this flow, we will retrieve the user's native language information for the translate feature."),Object(r.b)("h2",{id:"connecting-firebase-with-applications"},"Connecting Firebase with Applications"),Object(r.b)("p",null," before we retrieve user information, we must first create a database where the information is stored, and here we will use firebase as the database."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Go to ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://console.firebase.google.com/"}),"console firebase")," page, make sure you are logged in with a google account.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Click 'Create a Project' button."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603344422/create_project_firebase_muq6bw.png",alt:"create firebase project",title:"create firebase project"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Fill in the project data as you wish, and don't forget to check 'I accept the Firebase terms', then click 'continue'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603344533/isi_data_project_firebase_tqszlc.png",alt:"fill in firebase project data",title:"fill in firebase project data"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In step 2, disable 'Enable Google Analytics for this project' because you don't need it for this project, then click 'Continue'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603345137/step_2_create_firebase_project_nsxtf7.png",alt:"step 2 firebase project",title:"step 2 firebase project"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"After the project is successfully created> click 'Continue' button."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603345339/project_berhasil_dibuat_txwtmj.png",alt:"firebase project was created",title:"firebase project was created"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Click the ",Object(r.b)("inlineCode",{parentName:"p"},"</>")," button on 'add an app to get started'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603387257/add_app_fx4x3a.png",alt:"add app to firebase",title:"add app to firebase"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Fill in the application name> click the 'Register app' button."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603387396/isi_nama_app_vlhekf.png",alt:"add nickname app",title:"add nickname app"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create ",Object(r.b)("inlineCode",{parentName:"p"},"API_KEY"),", ",Object(r.b)("inlineCode",{parentName:"p"},"AUTH_DOMAIN")," and ",Object(r.b)("inlineCode",{parentName:"p"},"PROJECT_ID")," variable in the .env file in the glitch and fill it according to the value obtained in firebase sdk."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603392369/set_apikey_firebase_pvjd4t.png",alt:"firebase sdkl",title:"firebase sdk"})),"\n",Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603392368/add_variabel_firebase_g7elo8.png",alt:"set variable firebase",title:"set variable firebase"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"After that, return to the firebase console page > select the 'Develop' menu> Cloud Firestore > click the 'Create Database' button."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603387722/create_database_jmdhfx.png",alt:"create database",title:"create database"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In rules we select 'Test Mode'> click the 'Next' button.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In the location, leave it by default > click the 'Enable' button."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603388043/cloud_firestore_location_axigbn.png",alt:"location database",title:"location database"})))))),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"What is database? why use firebase?")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"A database is like a dictionary for data. So when we need information about what data it is, we search it in the dictionary and get the data information. And Firebase is like a dictionary brand. We use Firebase because It's easy to integrate with our app."))),Object(r.b)("h2",{id:"creating-a-user-table-in-firebase"},"Creating a User Table in Firebase"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"On the left sidebar of firebase, select the 'Develop' menu> Cloud Firestore> click the 'Start Collection' button."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"}," ",Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603453591/create_table_rekvc2.png",alt:"create table",title:"create table"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Fill in the name of the collection (table) with 'users'> click 'next'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"}," ",Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603456448/add_name_to_table_suu312.png",alt:"add name to table",title:"add name to table"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Click 'Auto ID'> fill in the field"))),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field Name"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:"center"}),"Field Type"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"id"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:"center"}),"string")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"language"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:"center"}),"string")))),Object(r.b)("p",null,"  and leave the value blank> click 'Save'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",null,"  ",Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603456448/add_field_to_table_aj8ktn.png",alt:"add field to table",title:"add field to table"})))),Object(r.b)("h2",{id:"creating-a-webview-to-get-user-data-with-reactjs"},"Creating a Webview to Get User Data with ReactJS"),Object(r.b)("p",null,"   We will create a webview to display the user language choice form with React js."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Add the ",Object(r.b)("inlineCode",{parentName:"p"},"APP_ID")," variable in .env, to get the app id of our application, you can see it on the facebook developer application dashboard."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603513718/app_id_xlqaxn.png",alt:"get app id",title:"get app id"})),"\n",Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603513718/add_app_id_valiable_jjiohs.png",alt:"set app id variable",title:"set app id variable"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create the get ",Object(r.b)("inlineCode",{parentName:"p"},"/setProfile")," route in app.js."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"   //set route with param userID\n   app.get('/setProfile/:userID', (req, res, next) => { \n     db.doc(`users/${req.params.userID}`).get().then((docSnapshot) => {\n     //check whether the user data is already in firebase\n      if(docSnapshot.exists){\n      //sends the setProfile.ejs file in the views and data folder of the app id, title and language\n         res.render('setProfile',{appId: APP_ID, title: 'Setting Profile', lang: docSnapshot.data().language});\n      //if not, it will enter user data into firebase\n      }else{\n                  db.collection(\"users\").doc(`${req.params.userID}`).set({\n          id: req.params.userID,\n          language: \"-\"\n         \n      })\n      .then(function() {\n          res.render('setProfile',{appId: APP_ID, title: 'Setting Profile', lang:'-'});\n      })\n      .catch(function(error) {\n          console.error(\"Error writing document: \", error);\n      });\n      }\n   });\n   }\n});\n")),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603513313/set_profile_route_mydjcb.png",alt:"set profile route",title:"set profile route"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a ",Object(r.b)("inlineCode",{parentName:"p"},"setProfile.ejs")," file in the views folder, so it's easier just to duplicate the \u02bbexample.ejs` file (right click on the file) then rename it to 'setProfile.ejs'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603476492/duplicate_file_example.ejs_svomu9.png",alt:"duplicate ejs file",title:"duplicate ejs file"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Edit the ",Object(r.b)("inlineCode",{parentName:"p"},'<script src =" /src/example.js "> <\/script>')," section of the views /setProfile.ejs file to be :"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'   <script src="/src/setProfile.js"><\/script> //load react component from setProfile.js file\n')),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603477605/edit_setProfile.ejs_gumwzw.png",alt:"edit ejs file",title:"edit ejs file"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a ",Object(r.b)("inlineCode",{parentName:"p"},"setProfile.js")," file in the src folder as a react component which will be loaded in the",Object(r.b)("inlineCode",{parentName:"p"}," setProfile.ejs")," file. so it's easier just duplicate the file ",Object(r.b)("inlineCode",{parentName:"p"},"example.js")," (right click on the file) then rename it to 'setProfile.js'."),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603477464/duplicate_file_example.js_bdk9v6.png",alt:"duplicate js file",title:"duplicate js file"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a language variable obtained from firebase using ",Object(r.b)("inlineCode",{parentName:"p"},"window.language")," in the ",Object(r.b)("inlineCode",{parentName:"p"}," setProfile.ejs")," file."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"window.language = '<%= lang %>'\n")),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603555076/lang_window_variable_psx7k4.png",alt:"add wondow lang variable",title:"add wondow lang variable"}))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create the react form component in the ",Object(r.b)("inlineCode",{parentName:"p"},"setProfile.js")," file."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"'use strict';\n\n  const e = React.createElement;\n  //create a select input form component\n  function FormInput(props) {\n    return (\n        React.createElement(\"select\", { className: \"form-control\",onChange: props.handlerLang, value: props.lang , style: { flexGrow: \"1\", marginTop: '1em'} },\n           React.createElement(\"option\", { value: '-' }, \"-\"),\n           React.createElement(\"option\", { value: 'id' }, \"Indonesia\"),\n           React.createElement(\"option\", { value: 'hi' }, \"India\"),\n           React.createElement(\"option\", { value: 'th' }, \"Thailand\"),\n           React.createElement(\"option\", { value: 'en' }, \"United States\")\n        )\n      )\n  }\n  //create a 'Save' component button\n  class Button extends React.Component {\n    constructor(props) {\n      super(props);\n\n       this.submit = this.submit.bind(this);\n    }\n    //create submit function to update profile\n    submit () {\n      fetch('https://hayword.glitch.me/setProfile', {\n    method: 'POST', \n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({id: window.psid, lang: this.props.lang}),\n  }).then(res => console.log(res))\n    }\n\n    render() {\n\n      return e(\n        'button',\n        { style:{ marginTop: '1em', width: '100%'},className: \"btn btn-primary\",onClick: ()=> this.submit },'Save'\n      );\n    }\n  }\n  //layout components for input form and the 'Save' button\n  class SelectLang extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { lang: window.language };\n      this.handlerLang = this.handlerLang.bind(this);\n    }\n\n    handlerLang (e){\n      this.setState({\n        lang: e.target.value\n      })\n    }\n\n    render() {\n\n      return e(\n        'div',\n        { style: {display: \"flex\", flexDirection: \"column\", alignItems: \"center\",width: \"100%\"}, className: \"container-fluid\" },\n\n            React.createElement(FormInput, {lang: this.state.lang,handlerLang: this.handlerLang},null),\n            React.createElement(Button, {lang: this.state.lang},null)    \n      );\n    }\n  }\n\nconst dom = document.querySelector('#component');\nReactDOM.render(e(SelectLang), dom);\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"whitelist the domain so that the webview we create can be accessed on messenger by:\nopen the facebook page (FB page)> page settings> advanced messaging> enter the url of the app to the whitelist domain"),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603569197/whitelist_domain_ifgh1i.png",alt:"whitelist domain",title:"whitelist domain"})))))),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"Why is it important to create webview? Why React?")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"It is important because we want the user to input a specific value. In this case, it is the Native Language selection for the translate feature. We don't want user input language that doesn't support by translate service provider partner. We use React because it's easy to handle data (user's language) between components through state and props."))),Object(r.b)("h2",{id:"saving-data-to-firebase"},"Saving Data to Firebase"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Create the post ",Object(r.b)("inlineCode",{parentName:"li"},"/setProfile")," route to store updated user profile data to firebase.",Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"app.post('/setProfile', (req, res) => { \n//update user data (language) to firebase\n   db.doc(`users/${req.body.id}`).update({\n  language: `${req.body.lang}`\n}).then(function() {\n//sends a message to the user that the data has been saved successfully\ncallSendAPI(req.body.id, {\n  text: 'Your Profile has Updated' })\n  res.status(200).end()\n});\n         }\n      );\n")))),Object(r.b)("h2",{id:"creating-a-webview-url-button"},"Creating a Webview Url Button"),Object(r.b)("p",null,"   Now we are going to make our application reply to the message with the webview url button template when the user first interacts with our application (Get Started Button), previously we have set the postback for getting started is 'MULAI'."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Make a condition if there is a message with the postback 'MULAI', then we will reply with the webview url button template."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),'   //function for postback type message management\n   function handlePostback(sender_psid, received_postback) {\n\n        let response;\n       // get payload postback\n       let payload = received_postback.payload;\n       //check whether the postback payload is the same as \'MULAI\' (user clicks the Get Started Button)\n     if(payload === \'MULAI\'){\n     \n     //provide a response template button\n         response = {\n             attachment: {\n                 type: "template",\n                 payload: {\n                     template_type: "button",\n                     text: "Hello, welcome to HayWord. please set your profile before access our features",\n                     buttons: [{\n                         type: "web_url",\n                         url: "https://hayword.glitch.me/setProfile/"+sender_psid,\n                         title: "Set Profile",\n                         webview_height_ratio: "compact",\n                         messenger_extensions: true\n                     }]\n                 }\n             }\n         }\n       }\n       // send a message with the response that we created above\n       callSendAPI(sender_psid, response);\n     }\n')),Object(r.b)("details",null,Object(r.b)("summary",null,"Show Details"),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(n.a)({parentName:"p"},{src:"https://res.cloudinary.com/dzrwauiut/image/upload/bo_4px_solid_grey/v1603574549/buton_web_url_arbvok.png",alt:"button url",title:"button url "})))))))}b.isMDXComponent=!0}}]);